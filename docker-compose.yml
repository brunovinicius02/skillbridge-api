version: '3.8'

services:
  skillbridge-api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: skillbridge-api
    ports:
      - "8080:8080"
    environment:
      # Oracle Database Configuration
      ORACLE_USERNAME: ${ORACLE_USERNAME:-rm566366}
      ORACLE_PASSWORD: ${ORACLE_PASSWORD:-080605}
      ORACLE_URL: ${ORACLE_URL:-jdbc:oracle:thin:@oracle.fiap.com.br:1521:ORCL}
      # Quarkus Configuration
      QUARKUS_HTTP_PORT: 8080
      QUARKUS_HTTP_HOST: 0.0.0.0
    networks:
      - skillbridge-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/q/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

networks:
  skillbridge-network:
    driver: bridge

# Para usar este arquivo:
# 1. Build: docker-compose build
# 2. Run: docker-compose up -d
# 3. Logs: docker-compose logs -f
# 4. Stop: docker-compose down
